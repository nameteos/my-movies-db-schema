---
# Movie Schema - v1
# Created: 2025-08-08
# This schema defines the structure for movie documents in MongoDB

schema_version: "1.0"
collection_name: "movies"
description: "Collection for storing movie information"

fields:
  _id:
    type: "objectId"
    description: "Unique identifier for the movie document"
    required: true
    
  embeddings:
    type: "object"
    description: "Map of embedding objects for vector search"
    properties:
      # Dynamic key-value pairs where keys are embedding names
      # and values are embedding objects
      "*":
        type: "object"
        properties:
          vector:
            type: "array"
            items:
              type: "number"
            description: "Vector representation of the movie"
          model:
            type: "string"
            description: "Model used to generate the embedding"
          version:
            type: "string"
            description: "Version of the model used"
          
  adult:
    type: "boolean"
    description: "Indicates if the movie is for adults only"
    required: true
    
  budget:
    type: "int64"
    description: "Movie production budget"
    required: true
    
  genres:
    type: "array"
    description: "List of movie genres"
    items:
      type: "object"
      properties:
        id:
          type: "integer"
          description: "Genre identifier"
        name:
          type: "string"
          description: "Genre name"
    required: true
    
  external_id:
    type: "integer"
    description: "External identifier for the movie (e.g., TMDB ID)"
    required: true
    
  imdb_id:
    type: "string"
    description: "IMDB identifier for the movie"
    required: true
    
  original_language:
    type: "string"
    description: "Original language of the movie"
    required: true
    
  original_title:
    type: "string"
    description: "Original title of the movie"
    required: true
    
  overview:
    type: "string"
    description: "Movie plot summary"
    required: true
    
  poster_path:
    type: "string"
    description: "Path to the movie poster image"
    required: true
    
  release_date:
    type: "string"
    description: "Movie release date (format: YYYY-MM-DD)"
    required: true
    
  revenue:
    type: "int64"
    description: "Movie box office revenue"
    required: true
    
  runtime:
    type: "integer"
    description: "Movie runtime in minutes"
    required: true
    
  spoken_languages:
    type: "array"
    description: "List of languages spoken in the movie"
    items:
      type: "object"
      properties:
        iso_639_1:
          type: "string"
          description: "Language code (ISO 639-1)"
        name:
          type: "string"
          description: "Language name"
    required: true
    
  status:
    type: "string"
    description: "Movie release status (e.g., Released, In Production)"
    required: true
    
  tagline:
    type: "string"
    description: "Movie tagline"
    required: true
    
  title:
    type: "string"
    description: "Movie title"
    required: true
    
  created_at:
    type: "date"
    description: "Timestamp when the document was created"
    required: true
    
  updated_at:
    type: "date"
    description: "Timestamp when the document was last updated"
    required: true

indexes:
  - name: "title_index"
    fields:
      - title: 1
    options:
      unique: false
      
  - name: "external_id_index"
    fields:
      - external_id: 1
    options:
      unique: true
      
  - name: "imdb_id_index"
    fields:
      - imdb_id: 1
    options:
      unique: true
      
  - name: "created_at_index"
    fields:
      - created_at: -1
    options:
      unique: false